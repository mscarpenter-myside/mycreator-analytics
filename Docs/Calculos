# üßÆ F√≥rmulas e C√°lculos do ETL MyCreator

Este documento detalha **matematicamente** como cada m√©trica √© calculada e processada pelo rob√¥ de dados.

---

## 1. Aba: `Perfis` (M√©tricas Agregadas)

As m√©tricas desta aba s√£o calculadas em duas etapas: extra√ß√£o direta da API (Snapshot) e agrega√ß√£o dos posts processados (C√°lculo ETL).

### A. M√©tricas de Snapshot (Direto da Fonte)
Dados obtidos no momento da execu√ß√£o, refletindo o estado atual da conta.

*   **Seguidores (Total)**
    *   *Fonte:* Endpoint `/backend/analytics/overview/getSummary`
    *   *L√≥gica:* Valor bruto retornado pela API para o dia atual.

### B. M√©tricas Calculadas (Performance MyCreator)
Calculadas somando ou dividindo os dados dos posts que passaram pelo ETL.

*   **Posts MyCreator**
    *   *F√≥rmula:* $\text{Contagem de linhas na aba Dados\_Brutos com esse Perfil}$
    *   *Filtro:* Apenas posts retornados pela ferramenta na lista de "Published Plans".

*   **Alcance Acumulado MyCreator**
    *   *F√≥rmula:* $\sum (\text{Alcance de cada Post})$
    *   *Descri√ß√£o:* Soma aritm√©tica simples do alcance √∫nico de cada post. N√£o desconta sobreposi√ß√£o de usu√°rios (se a mesma pessoa viu 2 posts, conta 2x).

*   **Intera√ß√µes Totais MyCreator**
    *   *F√≥rmula:* $\sum (\text{Likes}) + \sum (\text{Coment√°rios}) + \sum (\text{Salvos}) + \sum (\text{Compartilhamentos})$
    *   *Nota:* Soma absoluta de todas as intera√ß√µes.

*   **Engajamento M√©dio MyCreator (%)**
    *   *F√≥rmula Atual:* 
        $$ \left( \frac{\text{Intera√ß√µes Totais MyCreator}}{\text{Alcance Acumulado MyCreator}} \right) \times 100 $$
    *   *Arredondamento:* 2 casas decimais.
    *   *Interpreta√ß√£o:* Representa a taxa de intera√ß√£o sobre o alcance gerado. **N√ÉO √© dividida pelo n√∫mero de seguidores.**

---

## 2. Aba: `Redes_Monitoramento` (Agrega√ß√£o por Cidade)

Tabela gerada agrupando todos os posts processados por `Cidade` e `Rede Social`.

*   **Contagem de Posts**
    *   *F√≥rmula:* $\text{Count (ID Interno)}$ agrupado por cidade.

*   **Alcance Total**
    *   *F√≥rmula:* $\sum (\text{Alcance})$ de todos os posts da cidade.

*   **Impress√µes Totais**
    *   *F√≥rmula:* $\sum (\text{Impress√µes})$ de todos os posts da cidade.

*   **Engajamento M√©dio (%)**
    *   *F√≥rmula:* $\text{M√©dia Aritm√©tica} (\text{Taxa de Engajamento de cada Post})$
    *   *Detalhe:* Calcula-se a m√©dia das porcentagens individuais, n√£o a m√©dia ponderada global.
    *   *Exemplo:* Post A (10%) + Post B (20%) = M√©dia 15%.

---

## 3. Aba: `Hashtags_Analitico` (Minera√ß√£o de Texto)

Gerada via execu√ß√£o de Regex sobre as legendas dos posts.

*   **Identifica√ß√£o (Regex)**
    *   *Padr√£o:* `r"#(\w+)"` (Captura palavras seguidas de #).
    *   *Processamento:* Uma linha de post com 3 hashtags vira 3 linhas nesta an√°lise.

*   **Qtd Usos**
    *   *F√≥rmula:* $\text{Count (IDs de Post que cont√™m a Hashtag)}$

*   **Engajamento Total da Hashtag**
    *   *F√≥rmula:* $\sum (\text{Likes} + \text{Coment√°rios} + \text{Salvos} + \text{Shares})$ de todos os posts que usaram a tag.
    *   *Nota:* Se um post tem 100 likes e usa #imoveis e #casa, os 100 likes s√£o somados tanto para #imoveis quanto para #casa.

---

## 4. Abas Detalhadas (Dados Brutos, Reels, Imagens...)

Nestas abas, as m√©tricas v√™m diretamente da API de Analytics do Instagram/Facebook para cada post individual.

*   **Taxa de Engajamento por Post (%)**
    *   *F√≥rmula:* 
        $$ \left( \frac{\text{Likes} + \text{Coment√°rios} + \text{Salvos}}{\text{Alcance}} \right) \times 100 $$
    *   *Nota:* O c√≥digo calcula isso para cada linha. Se Alcance = 0, o Engajamento √© 0.

*   **Tempo M√©dio (Reels)**
    *   *Fonte:* Campo `avg_watch_time` ou `average_watch_time` da API.
    *   *Unidade:* Segundos.

*   **Plays**
    *   *Fonte:* Campo `plays`, `videoViews`, ou `views` da API.
    *   *Tratamento:* Se o valor n√£o existir, √© assumido 0. Na base unificada, se Plays for 0, usamos Impress√µes como fallback.

---

## 5. Status de Dados (L√≥gica de Erro)

*   **Coluna: Status Dados / Analytics Error**
    *   `"Sem dados"`: O post foi listado, mas a chamada de analytics retornou vazio (comum em posts muito recentes ou erros de API).
    *   `"ID ou Conta ausente"`: O post n√£o tinha ID de plataforma vinculado.
